(this["webpackJsonpcatan-stats"]=this["webpackJsonpcatan-stats"]||[]).push([[0],{496:function(e,t,a){e.exports=a(647)},501:function(e,t,a){},502:function(e,t,a){},647:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),l=a.n(i),o=a(69),c=a(442),s=(a(501),a(26)),m=(a(502),a(32)),u=a.n(m),d=a(422),p=a(423),v=a(126),f=a(424),h="https://pure-journey-53329.herokuapp.com/cors?q=",E={roads:2,merchant:1};function g(e){return alert("Unrecognized field"),new Error("Bad field: ".concat(e))}function b(e){var t,a;return{cities:Number(null===(t=/(\d+)c/.exec(e))||void 0===t?void 0:t[1])||0,settlements:Number(null===(a=/(\d+)s/.exec(e))||void 0===a?void 0:a[1])||0}}function x(e){var t,a,n;return{trade:Number(null===(t=/(\d+)y/.exec(e))||void 0===t?void 0:t[1])||0,politics:Number(null===(a=/(\d+)b/.exec(e))||void 0===a?void 0:a[1])||0,science:Number(null===(n=/(\d+)g/.exec(e))||void 0===n?void 0:n[1])||0}}function y(e){return e.split(", ").reduce((function(e,t){if(!t)return e;var a=function(e){var t=/^(\d)+d/.exec(e);if(t)return{score:+t[1],name:"defender"};switch(e){case"my":return{score:2,name:"metropolisTrade"};case"mb":return{score:2,name:"metropolisPolitics"};case"mg":return{score:2,name:"metropolisScience"};case"vb":return{score:1,name:"victoryPolitics"};case"vg":return{score:1,name:"victoryScience"};default:if("roads"!==e&&"merchant"!==e)throw g(e);var a=E[e];if(!a)throw g(e);return{name:e,score:a}}}(t),n=a.name,r=a.score;return e.total+=r,e.items[n]=e.items[n]||0+r,e}),{total:0,items:{}})}function S(e,t,a){switch(e){case"Player":return t.filter((function(e){return!!e})).map((function(e){return{name:e.trim()}}));case"Score":return a.map((function(e,a){return Object(v.a)({},e,{score:+t[a]})}));case"Base":return a.map((function(e,a){return Object(v.a)({},e,{base:b(t[a])})}));case"Development":return a.map((function(e,a){return Object(v.a)({},e,{development:x(t[a])})}));case"Extra points":return a.map((function(e,a){return Object(v.a)({},e,{extraPoints:y(t[a])})}));case"Start order":return a.map((function(e,a){return Object(v.a)({},e,{order:+t[a]})}));default:throw g("".concat(e,":").concat(t.join(", ")))}}var w=a(714),j=a(476),O=a(710),P=a(704),T=a(712),k=a(125),C=a(699),G=a(700),F=a(695),N=a(697),z=a(719),W=a(711),L=a(720),M=a(181),D=a(721),A=a(276),B=a(88),I=a(49),R=a(443),H=a(717),U=a(204),Y=a(260),J=a(444),q=a(433),V=function(e,t){return e.reduce((function(e,a){var n,r,i,l,o,c,s,m,u,d,p,v,f,h,E,g,b,x,y,S,w,j,O,P,T,k,C=t?a.players.findIndex((function(e){return e.name===t})):0,G=a.players[C];return e.development.trade+=null!==(n=null===(r=G.development)||void 0===r?void 0:r.trade)&&void 0!==n?n:0,e.development.politics+=null!==(i=null===(l=G.development)||void 0===l?void 0:l.politics)&&void 0!==i?i:0,e.development.science+=null!==(o=null===(c=G.development)||void 0===c?void 0:c.science)&&void 0!==o?o:0,e.base.cities+=null!==(s=null===(m=G.base)||void 0===m?void 0:m.cities)&&void 0!==s?s:0,e.base.settlements+=null!==(u=null===(d=G.base)||void 0===d?void 0:d.settlements)&&void 0!==u?u:0,e.extra.roads+=(null!==(p=null===(v=G.extraPoints)||void 0===v?void 0:v.items.roads)&&void 0!==p?p:0)/2,e.extra.merchant+=null!==(f=null===(h=G.extraPoints)||void 0===h?void 0:h.items.merchant)&&void 0!==f?f:0,e.extra.defender+=null!==(E=null===(g=G.extraPoints)||void 0===g?void 0:g.items.defender)&&void 0!==E?E:0,e.extra.victoryPolitics+=null!==(b=null===(x=G.extraPoints)||void 0===x?void 0:x.items.victoryPolitics)&&void 0!==b?b:0,e.extra.victoryScience+=null!==(y=null===(S=G.extraPoints)||void 0===S?void 0:S.items.victoryScience)&&void 0!==y?y:0,e.extra.metropolisTrade+=(null!==(w=null===(j=G.extraPoints)||void 0===j?void 0:j.items.metropolisTrade)&&void 0!==w?w:0)/2,e.extra.metropolisPolitics+=(null!==(O=null===(P=G.extraPoints)||void 0===P?void 0:P.items.metropolisPolitics)&&void 0!==O?O:0)/2,e.extra.metropolisScience+=(null!==(T=null===(k=G.extraPoints)||void 0===k?void 0:k.items.metropolisScience)&&void 0!==T?T:0)/2,"number"===typeof G.order&&e.order[G.order-1]++,e}),{development:{trade:0,politics:0,science:0},base:{cities:0,settlements:0},extra:{merchant:0,roads:0,defender:0,victoryPolitics:0,victoryScience:0,metropolisTrade:0,metropolisPolitics:0,metropolisScience:0},order:[0,0,0,0]})};var $=function(e){var t=e.player,a=e.playerGames.filter((function(e){var t=e.players;return!!t[0].base&&!!t[0].development})),n=a.filter((function(e){return e.players[0].name===(null===t||void 0===t?void 0:t.name)})),i=V(a,null===t||void 0===t?void 0:t.name),l=(V(n,null===t||void 0===t?void 0:t.name),{development:{trade:i.development.trade/a.length,science:i.development.science/a.length,politics:i.development.politics/a.length},base:{cities:i.base.cities/a.length,settlements:i.base.settlements/a.length},extra:{merchant:i.extra.merchant/a.length,roads:i.extra.roads/a.length,defender:i.extra.defender/a.length,victoryPolitics:i.extra.victoryPolitics/a.length,victoryScience:i.extra.victoryScience/a.length,metropolisTrade:i.extra.metropolisTrade/a.length,metropolisPolitics:i.extra.metropolisPolitics/a.length,metropolisScience:i.extra.metropolisScience/a.length}});return r.a.createElement(F.a,{elevation:2},r.a.createElement(N.a,null,r.a.createElement(w.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},r.a.createElement(j.a,{variant:"h5"},(null===t||void 0===t?void 0:t.name)||"General"),r.a.createElement(j.a,{variant:"h6"},r.a.createElement(B.a,{icon:I.b}),r.a.createElement(w.a,{component:"span",ml:1},null===t||void 0===t?void 0:t.games.length))),r.a.createElement(w.a,{mb:2},r.a.createElement(z.a,{placement:"top-start",title:"Average commodity level reached per game"},r.a.createElement(j.a,{align:"left",variant:"subtitle1"},"Commodities")),r.a.createElement(w.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Science"),r.a.createElement(j.a,{variant:"subtitle2"},l.development.science.toFixed(2))),r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Trade"),r.a.createElement(j.a,{variant:"subtitle2"},l.development.trade.toFixed(2))),r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Politics"),r.a.createElement(j.a,{variant:"subtitle2"},l.development.politics.toFixed(2))))),r.a.createElement(w.a,{mb:2},r.a.createElement(z.a,{placement:"top-start",title:"Percentage of games where finished with the metropoly"},r.a.createElement(j.a,{align:"left",variant:"subtitle1"},"Metropolies")),r.a.createElement(w.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Science"),r.a.createElement(j.a,{variant:"subtitle2"},(100*l.extra.metropolisScience).toFixed(2),"%")),r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Trade"),r.a.createElement(j.a,{variant:"subtitle2"},(100*l.extra.metropolisTrade).toFixed(2),"%")),r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Politics"),r.a.createElement(j.a,{variant:"subtitle2"},(100*l.extra.metropolisPolitics).toFixed(2),"%")))),r.a.createElement(w.a,{mb:2},r.a.createElement(z.a,{placement:"top-start",title:"Average count of buildings per game"},r.a.createElement(j.a,{align:"left",variant:"subtitle1"},"Buildings")),r.a.createElement(w.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Settlements"),r.a.createElement(j.a,{variant:"subtitle2"},l.base.settlements.toFixed(2))),r.a.createElement(w.a,{flex:"1"}),r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Cities"),r.a.createElement(j.a,{variant:"subtitle2"},l.base.cities.toFixed(2))))),r.a.createElement(w.a,{mb:2},r.a.createElement(z.a,{placement:"top-start",title:"Percentage of games where owned the corresponding item. Except for defender, which represents average owned card count per game"},r.a.createElement(j.a,{align:"left",variant:"subtitle1"},"Extra")),r.a.createElement(w.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Roads"),r.a.createElement(j.a,{variant:"subtitle2"},(100*l.extra.roads).toFixed(2),"%")),r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Merchant"),r.a.createElement(j.a,{variant:"subtitle2"},(100*l.extra.merchant).toFixed(2),"%")),r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Defender"),r.a.createElement(j.a,{variant:"subtitle2"},l.extra.defender.toFixed(2)))),r.a.createElement(w.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(z.a,{placement:"top-start",title:"Science development card"},r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Printer"),r.a.createElement(j.a,{variant:"subtitle2"},(100*l.extra.victoryScience).toFixed(2),"%"))),r.a.createElement(w.a,{flex:"1"}),r.a.createElement(z.a,{placement:"top-start",title:"Politics development card"},r.a.createElement(w.a,{flex:"1"},r.a.createElement(j.a,{variant:"caption"},"Constitution"),r.a.createElement(j.a,{variant:"subtitle2"},(100*l.extra.victoryPolitics).toFixed(2),"%")))))))},K=[{maxTime:12096e5,color:"#0f9960",icon:I.e},{maxTime:2592e6,color:"#2d5f4a",icon:I.h},{maxTime:5184e6,color:"inherit",icon:I.f},{maxTime:10368e6,color:"#692626",icon:I.d},{color:"#b10101",icon:I.g}],Q=["first","second","third","fourth"];var X=function(e){var t=e.data,a=t[t.length-1],i=t[0],l=new Date(a.date),o=new Date(i.date),c=Date.now()-+l,m=K.find((function(e){return!e.maxTime||c<e.maxTime})),u=Object(n.useState)([o,l]),d=Object(s.a)(u,2),p=d[0],v=d[1],f=Object(k.a)(new Set(t.flatMap((function(e){return e.players.map((function(e){return e.name}))})))),h=Object(n.useState)([]),E=Object(s.a)(h,2),g=E[0],b=E[1],x=Object(n.useState)([]),y=Object(s.a)(x,2),S=y[0],P=y[1],T=t.filter((function(e){var t=e.date;return p[0]&&p[1]&&p[0]<=new Date(t)&&p[1]>=new Date(t)})),V=T.filter((function(e){return!e.players.some((function(e){var t=e.name;return g.includes(t)}))})),X=V.filter((function(e){var t=Object(s.a)(e.players,1)[0];return[t.base,t.development,t.extraPoints,t.order].includes(void 0)})).map((function(e){var t=e.gameNo,a=Object(s.a)(e.players,1)[0],n=a.base,r=a.development,i=a.extraPoints,l=a.order,o=[];return n||o.push("base"),r||o.push("development"),i||o.push("extraPoints"),void 0===l&&o.push("order"),{gameNo:t,missingFields:o}})),Z=S.length?V.filter((function(e){return!X.find((function(t){var a=t.gameNo,n=t.missingFields;return a===e.gameNo&&(!(!S.includes("order")||!n.includes("order"))||!(!S.includes("point-details")||!n.some((function(e){return"order"!==e}))))}))})):V,_=X.filter((function(e){var t=e.gameNo;return Z.find((function(e){return e.gameNo===t}))})),ee=Object(k.a)(new Set(T.flatMap((function(e){return e.players.map((function(e){return e.name}))})))),te=Z.reduce((function(e,t){return t.players.forEach((function(a,n){var r=n+1,i=e[a.name]||{name:a.name,totalGames:0,totalScore:0,totalWins:0,places:{first:0,second:0,third:0,fourth:0},games:[]};i.totalScore+=a.score,i.totalGames++,i.totalWins+=1===r?1:0,i.games.push(t);var l=Q[n];i.places[l]+=1,e[a.name]=i})),e}),{});return Object(n.useEffect)((function(){var e=.2*t.length,a=Object.values(te).filter((function(t){return t.totalGames<e})).map((function(e){return e.name}));a&&b(a)}),[]),Z.reduce((function(e,t){var a=t.players;return function(e){return void 0!==e[0].order}(a)?(a.map((function(e){return e.order})).forEach((function(t,a){var n=Q[t-1],r=Q[a],i=e[n]||{};i[r]=(i[r]||0)+1,e[n]=i})),e):e}),{}),r.a.createElement(C.a,null,r.a.createElement(w.a,{my:4},r.a.createElement(G.a,{container:!0,spacing:3},r.a.createElement(G.a,{item:!0,xs:!0},r.a.createElement(F.a,{elevation:2},r.a.createElement(N.a,null,r.a.createElement(j.a,{variant:"h4"},r.a.createElement(B.a,{icon:I.b}),"\xa0Total games"),r.a.createElement(j.a,{variant:"h3"},t.length)))),m&&r.a.createElement(G.a,{item:!0,xs:!0},r.a.createElement(F.a,{elevation:2},r.a.createElement(N.a,null,r.a.createElement(j.a,{variant:"h4"},r.a.createElement(B.a,{icon:I.a}),"\xa0Last played"),r.a.createElement(j.a,{variant:"h3"},r.a.createElement(z.a,{title:Object(R.a)(l,"do MMMM yyyy"),placement:"top"},r.a.createElement("span",{style:{color:m.color}},Object(H.a)(l,{addSuffix:!0}),"\xa0",r.a.createElement(B.a,{icon:m.icon}))))))),r.a.createElement(G.a,{item:!0,xs:!0},r.a.createElement(F.a,{elevation:2},r.a.createElement(N.a,null,r.a.createElement(j.a,{variant:"h4"},r.a.createElement(B.a,{icon:I.i}),"\xa0Total players"),r.a.createElement(j.a,{variant:"h3"},f.length)))))),r.a.createElement(w.a,{py:2,px:2,mx:-2,position:"sticky",top:0,display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:1,style:{backgroundColor:"white"}},r.a.createElement(w.a,null,r.a.createElement(U.b,{startText:"Start date",endText:"End date",label:null,value:p,disableFuture:!0,disableHighlightToday:!0,reduceAnimations:!0,minDate:o,maxDate:l,onChange:v,renderInput:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,Object.assign({},e,{size:"small",helperText:null})),r.a.createElement(U.a,null," to "),r.a.createElement(O.a,Object.assign({},t,{size:"small",helperText:null})))}})),!!X.length&&r.a.createElement(w.a,{display:"flex",flex:"1",px:2,alignItems:"center"},r.a.createElement(w.a,null,r.a.createElement(W.a,{control:r.a.createElement(L.a,{size:"small",checked:!S.includes("order"),onChange:function(){return P((function(e){return e.includes("order")?e.filter((function(e){return"order"!==e})):[].concat(Object(k.a)(e),["order"])}))},color:"primary"}),label:"Games missing start order"}),r.a.createElement(W.a,{control:r.a.createElement(L.a,{size:"small",checked:!S.includes("point-details"),onChange:function(){return P((function(e){return e.includes("point-details")?e.filter((function(e){return"point-details"!==e})):[].concat(Object(k.a)(e),["point-details"])}))},color:"primary"}),label:"Games missing point details"})),r.a.createElement(z.a,{title:_.map((function(e){var t=e.gameNo,a=e.missingFields;return r.a.createElement(w.a,null,"Game #",t," is missing - ",a.join(", ")," data")})),placement:"top"},r.a.createElement(w.a,{pl:3,component:"span",visibility:_.length?"visible":"hidden"},r.a.createElement(B.a,{icon:I.c,size:"lg",color:M.a.deepOrange[500]})))),r.a.createElement(w.a,null,ee.map((function(e){var t=g.includes(e);return r.a.createElement(D.a,{style:{margin:2},key:e,label:e,variant:t?"outlined":void 0,color:t?void 0:"primary",onClick:function(){return b(t?g.filter((function(t){return t!==e})):[].concat(Object(k.a)(g),[e]))}})})))),r.a.createElement(w.a,{my:4},r.a.createElement(w.a,{mb:2},r.a.createElement(j.a,{variant:"h4"},"Shown player data")),r.a.createElement(G.a,{container:!0,spacing:3},Object.values(te).map((function(e){return r.a.createElement(G.a,{item:!0,sm:4},r.a.createElement($,{key:e.name,player:e,playerGames:e.games}))})))),r.a.createElement(w.a,{mt:4},r.a.createElement(G.a,{container:!0,spacing:3},r.a.createElement(G.a,{item:!0,xs:12,style:{maxHeight:"80vh",height:500}},r.a.createElement(j.a,{variant:"h4"},"1st place percentage over time"),r.a.createElement(Y.a,{data:Object.values(te).map((function(e){var t=Z.filter((function(t){return t.players.some((function(t){return t.name===e.name}))}));return{id:e.name,data:t.reduce((function(t,a,n){var r,i=0===a.players.findIndex((function(t){return t.name===e.name})),l=(((null===(r=t[t.length-1])||void 0===r?void 0:r.y)||0)*t.length+ +i)/(n+1);return t.push({x:a.gameNo,y:l}),t}),[])}})),margin:{top:50,right:60,bottom:120,left:60},colors:{scheme:"category10"},curve:"natural",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"Game",legendOffset:40,legendPosition:"middle"},lineWidth:4,pointSize:12,pointBorderWidth:2,useMesh:!0,enableCrosshair:!1,yFormat:function(e){return"".concat(Math.round(1e4*+e)/100,"%")},tooltip:function(e){var a=t.find((function(t){return t.gameNo===String(e.point.data.x)}));return a?r.a.createElement(A.a,null,r.a.createElement(w.a,{p:1,alignContent:"left"},r.a.createElement("div",null,a.date),a.players.map((function(e){return r.a.createElement("div",null,e.name,": ",e.score)})))):r.a.createElement("div",null,"Missing game data")},legends:[{anchor:"bottom",direction:"row",translateY:80,itemWidth:100,itemHeight:18,itemTextColor:"#999",symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]})),r.a.createElement(G.a,{item:!0,xs:6,style:{height:300}},r.a.createElement(j.a,{variant:"h4"},"1st place percentage"),r.a.createElement(J.a,{data:Object.values(te).map((function(e){return{id:e.name,label:e.name,value:e.totalWins/e.totalGames}})),sliceLabel:function(e){var t=e.value;return"".concat(Math.round(1e4*t)/100,"%")},colors:{scheme:"category10"},innerRadius:.4,padAngle:2,radialLabelsLinkColor:{from:"color",modifiers:[]},radialLabelsLinkStrokeWidth:4,radialLabelsLinkOffset:4,slicesLabelsSkipAngle:2,radialLabelsSkipAngle:1,margin:{top:40,right:80,bottom:80,left:80},tooltip:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Games played: ",te[e.id].totalGames),r.a.createElement("p",null,"Total wins: ",te[e.id].totalWins))},legends:[{anchor:"bottom",direction:"row",translateY:56,itemWidth:100,itemHeight:18,itemTextColor:"#999",symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]})),r.a.createElement(G.a,{item:!0,xs:6,style:{height:300}},r.a.createElement(j.a,{variant:"h4"},"Place percentage"),r.a.createElement(q.a,{data:Object.values(te).map((function(e){var t=e.name,a=e.places,n=e.totalGames;return{name:t,first:a.first/n,second:a.second/n,third:a.third/n,fourth:a.fourth/n}})),label:function(e){var t=e.value;return"number"!==typeof t?"":"".concat(Math.round(1e4*t)/100,"%")},keys:Q,indexBy:"name",margin:{top:10,right:60,bottom:80,left:60},colors:{scheme:"category10"},legends:[{dataFrom:"keys",anchor:"bottom",direction:"row",justify:!1,translateY:60,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15})),r.a.createElement(G.a,{item:!0,xs:12,style:{maxHeight:"80vh",height:500}},r.a.createElement(j.a,{variant:"h4"},"Average score over time"),r.a.createElement(Y.a,{data:Object.values(te).map((function(e){var t=Z.filter((function(t){return t.players.some((function(t){return t.name===e.name}))}));return{id:e.name,data:t.reduce((function(t,a,n){var r,i,l=(null===(r=a.players.find((function(t){return t.name===e.name})))||void 0===r?void 0:r.score)||0,o=(((null===(i=t[t.length-1])||void 0===i?void 0:i.y)||0)*t.length+l)/(n+1);return t.push({x:a.gameNo,y:o}),t}),[])}})),margin:{top:50,right:60,bottom:120,left:60},colors:{scheme:"category10"},curve:"natural",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"Game",legendOffset:40,legendPosition:"middle"},lineWidth:4,pointSize:12,pointBorderWidth:2,useMesh:!0,enableCrosshair:!1,yScale:{type:"linear",max:"auto",min:"auto"},legends:[{anchor:"bottom",direction:"row",translateY:80,itemWidth:100,itemHeight:18,itemTextColor:"#999",symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]})))))};var Z=function(){var e=new URLSearchParams(window.location.search.slice(1)).get("file"),t=Object(n.useState)(e||""),a=Object(s.a)(t,2),i=a[0],l=a[1];console.time("parse");var o=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(!1),o=Object(s.a)(l,2),c=o[0],m=o[1],v=Object(n.useState)(null),E=Object(s.a)(v,2),b=E[0],x=E[1];Object(n.useEffect)((function(){function t(){return(t=Object(p.a)(u.a.mark((function t(){var a,n,r,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,t.next=4,new Promise((function(t,a){return Object(f.parse)(h+e,{download:!0,worker:!0,complete:t,error:a})}));case 4:a=t.sent,n=a.data.slice(2),console.log("data",n),r=n.reduce((function(e,t,a){var r=t.slice(0,7),i=Object(d.a)(r),l=i[0],o=i[1],c=i[2],s=i.slice(3);if(l&&(e.currentGame&&e.data.push(e.currentGame),e.currentGame={gameNo:l,date:o,players:[]}),!e.currentGame)throw g(t.join(", "));return e.currentGame.players=S(c,s,e.currentGame.players),a===n.length-1&&e.data.push(e.currentGame),e}),{currentGame:null,data:[]}),l=r.data,i(l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),x(t.t0);case 14:m(!1);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]);var y=null===r||void 0===r?void 0:r.map((function(e){var t=e.players,a=e.gameNo;return t.map((function(e){var t,n,r;if(!e.extraPoints&&!e.base)return{};var i=((null===(t=e.extraPoints)||void 0===t?void 0:t.total)||0)+(2*((null===(n=e.base)||void 0===n?void 0:n.cities)||0)+((null===(r=e.base)||void 0===r?void 0:r.settlements)||0));return{gameNo:a,name:e.name,score:e.score,development:e.development,expectedScore:i}}))})).filter((function(e){return e.some((function(e){var t=e.expectedScore;return e.score!==t}))}));return console.log("scores",y),{data:r,isLoading:c,error:b}}(i),c=o.data,m=o.isLoading,v=o.error;return console.timeEnd("parse"),console.error("pppp",c),function(e){Object(n.useEffect)((function(){var t=new URL(window.location.href);e?t.searchParams.set("file",e):t.searchParams.delete("file"),window.history.replaceState({},"",t.href)}),[e])}(i),r.a.createElement(w.a,{pt:4},r.a.createElement(w.a,{textAlign:"center",display:"flex",alignItems:"center",flexDirection:"column"},r.a.createElement(j.a,{variant:"h1"},"Catan stats"),!c&&r.a.createElement(j.a,{variant:"h2"},"\ud83d\udc4b gimme something to visualize"),r.a.createElement(w.a,{maxWidth:600,width:"100%",pt:2},r.a.createElement(O.a,{value:i,label:v?null===v||void 0===v?void 0:v.toString():"CSV or JSON URL",variant:"outlined",fullWidth:!0,error:!!v,onChange:function(e){return l(e.target.value)},InputProps:{endAdornment:m&&r.a.createElement(P.a,{position:"end"},r.a.createElement(T.a,{size:24}))}}))),c&&r.a.createElement(X,{data:c}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.b,{dateAdapter:c.a},r.a.createElement(Z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[496,1,2]]]);
//# sourceMappingURL=main.80f9ce6c.chunk.js.map